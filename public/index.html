<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>hello-wasm example</title>
  </head>
  <body>
    <script type="module">
      const worker = new Worker("worker.js", { type: "module" });

      worker.onmessage = (event) => {
        if (event.data.success) {
          console.log("Worker result:", event.data.result);
        } else {
          alert(`Failed to execute function: ${event.data.error}`);
        }
      };

      worker.onerror = (error) => {
        console.error("Worker error:", error);
        alert("An error occurred in the web worker");
      };

      // Function to call the worker with a specific function name and arguments
      const callWorkerFunction = (functionName, ...args) => {
        worker.postMessage({ functionName, args });
      };

      const dataUrl = "/data/etfs.json.enc";
      callWorkerFunction("count_entries_per_exchange", dataUrl);
    </script>
  </body>
</html>
