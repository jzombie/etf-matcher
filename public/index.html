<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>hello-wasm example</title>
  </head>
  <body>
    <script type="module">
      const worker = new Worker("worker.js", { type: "module" });

      worker.onmessage = (event) => {
        if (event.data.success) {
          console.log(event.data.counts);
        } else {
          alert(`Failed to count ETFs per exchange: ${event.data.error}`);
        }
      };

      worker.onerror = (error) => {
        console.error("Worker error:", error);
        alert("An error occurred in the web worker");
      };

      const dataUrl = "/data/etfs.json.enc";
      const password = "mypassword";
      worker.postMessage({ url: dataUrl, password: password });
    </script>
  </body>
</html>
